{"componentChunkName":"component---src-templates-blog-post-js","path":"/ru/posts/scrapy-estate-cian/","result":{"data":{"markdownRemark":{"html":"<p>Исходный код можно найти <a href=\"https://github.com/ntyukaev/cian-webcrawler\">здесь</a>.</p>\n<p>Это приложение создано для сбора данных о недвижимости с <a href=\"https://cian.ru\">cian.ru</a> using <a href=\"https://scrapy.org/\">Scrapy</a>.</p>\n<h2>Требования</h2>\n<ul>\n<li>Python 3.10</li>\n<li>Node js</li>\n</ul>\n<h2>Установка</h2>\n<p>Перейдите в папку проекта и установите зависимости Python:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-r</span> requirements.txt</code></pre></div>\n<h2>Как использовать?</h2>\n<p>Приложение хранит данные в базе данных, а также уведомляет вас по электронной почте.\nПеред использованием приложения вы должны указать следующие переменные среды:</p>\n<ul>\n<li><strong>USER_AGENT</strong>: Заголовок запроса. Для получения дополнительной информации см. <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent\">официальную документацию</a>. Пример значения: <strong>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36</strong>.</li>\n<li><strong>CONNECTION_STRING</strong>: Строка подключения к базе данных. Больше информации <a href=\"https://en.wikipedia.org/wiki/Connection_string\">здесь</a>. Пример: <strong>sqlite:///flats.sqlite</strong>.</li>\n<li><strong>MAIL_HOST</strong>: Имя хоста почтового сервера.</li>\n<li><strong>MAIL_PASS</strong>: Пароль почтового сервера.</li>\n<li><strong>MAIL_USER</strong>: Отправитель письма.</li>\n<li><strong>MAIL_PORT</strong>: Порт почтового сервера.</li>\n<li><strong>MAIL_RECIPIENT</strong>: Получатель письма.</li>\n</ul>\n<p>Для настройки сервера электронной почты вы можете использовать gmail.com. <a href=\"https://kinsta.com/blog/gmail-smtp-server/\">Эта статья</a> описывает шаги по настройке smtp-сервера gmail.</p>\n<p>После настройки переменных среды перейдите в папку проекта и выполните следующую команду:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">scrapy crawl cian <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-a</span> <span class=\"token assign-left variable\">location</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>location string<span class=\"token operator\">></span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-a</span> <span class=\"token assign-left variable\">minprice</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>min price <span class=\"token keyword\">in</span> rubles<span class=\"token operator\">></span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-a</span> <span class=\"token assign-left variable\">maxprice</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>max price <span class=\"token keyword\">in</span> rubles<span class=\"token operator\">></span></code></pre></div>\n<h2>Список аргументов</h2>\n<p>Паук имеет следующие аргументы (все аргументы передаются через <strong>-a name=val</strong>):</p>\n<ul>\n<li><strong>location</strong>: (Обязательно) Реальный адрес, который идентифицирует местоположение.</li>\n<li><strong>minprice</strong>: (Обязательно) Минимальная цена на объекты недвижимости.</li>\n<li><strong>maxprice</strong>: (Обязательно) Максимальная цена на объекты недвижимости.</li>\n<li><strong>zoom</strong>: (Необязательно. По умолчанию <strong>0,001</strong>) Переменная, используемая для создания полигона местоположения (см. <a href=\"estate/spiders/cian.py\">estate/spiders/cian.py</a>).\nЧем больше значение <strong>zoom</strong>, тем больше полигон локации.</li>\n<li><strong>step</strong>: (Необязательно. По умолчанию <strong>0,001</strong>) Переменная, используемая для разделения полигона местоположения на несколько полигонов. Чем больше сгенерированных полигонов, тем больше результатов вы получите.</li>\n<li><strong>room1</strong>: (Необязательно. По умолчанию <strong>1</strong>) Если установлено <strong>1</strong>, включают однокомнатные квартиры, иначе <strong>0</strong>.</li>\n<li><strong>room2</strong>: (Необязательно. По умолчанию <strong>0</strong>) Если установлено <strong>1</strong>, включают двухкомнатные квартиры, иначе <strong>0</strong>.</li>\n<li><strong>room3</strong>: (Необязательно. По умолчанию <strong>0</strong>) Если установлено <strong>1</strong>, включают трехкомнатные квартиры, иначе <strong>0</strong>.</li>\n<li><strong>room4</strong>: (Необязательно. По умолчанию <strong>0</strong>) Если установлено <strong>1</strong>, включают четырехкомнатные квартиры, иначе <strong>0</strong>.</li>\n</ul>","frontmatter":{"title":"Автоматический сбор данных о квартирах с сайта cian.ru"},"fields":{"updated":"2023-05-08T20:02:47.616Z","path":"/posts/scrapy-estate-cian/"}},"locales":{"edges":[{"node":{"ns":"index","data":"{\"Home\":\"Главная\",\"Intro Short\":\"Lorem ipsum dolor sit amet. Non repudiandae quae est perspiciatis nulla non consequatur sapiente aut beatae magni. Ut porro molestias et omnis quia qui maxime natus! Ad accusamus nulla sit totam dicta ut rerum veritatis 33 mollitia animi et reprehenderit blanditiis 33 iusto internos et nihil debitis.\",\"Projects\":\"Мои проекты\",\"About\":\"Обо мне\",\"Contact\":\"Связаться со мной\",\"Show All\":\"Afficher tout\",\"updated at\":\"Обновлено\",\"Written by\":\"Автор:\"}","language":"ru"}}]}},"pageContext":{"id":"a63c9821-f1a0-5967-8d3e-747c569fcbb6","languages":["ru","en"],"previous":{"id":"2c3eabe9-bc2a-5f11-bbd0-9dd36299a1d4","fields":{"path":"/posts/invest-crypto-vue-laravel/","language":"ru","sourceInstanceName":"posts"},"frontmatter":{"title":"Платформа для крипто инвестиций на Laravel/Vue"}},"next":{"id":"cfa1c2e0-8df7-5638-990f-20d27c2e8aa5","fields":{"path":"/posts/multilingual-parallax-blog-website/","language":"ru","sourceInstanceName":"posts"},"frontmatter":{"title":"Мультиязычный сайт-блог с параллакс эффектом"}},"language":"ru","i18n":{"language":"ru","languages":["en","ru"],"defaultLanguage":"en","generateDefaultLanguagePage":true,"routed":true,"originalPath":"/posts/scrapy-estate-cian/","path":"/ru/posts/scrapy-estate-cian/"}}},"staticQueryHashes":["1271961041","2421966660","2744905544"],"slicesMap":{}}