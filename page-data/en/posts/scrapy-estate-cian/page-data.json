{"componentChunkName":"component---src-templates-blog-post-js","path":"/en/posts/scrapy-estate-cian/","result":{"data":{"markdownRemark":{"html":"<p>The source code can be found <a href=\"https://github.com/ntyukaev/cian-webcrawler\">here</a>.</p>\n<p>This Python package serves to collect real estate data from <a href=\"https://cian.ru\">cian.ru</a> using <a href=\"https://scrapy.org/\">Scrapy</a>.</p>\n<h2>Requirements</h2>\n<ul>\n<li>Python 3.10 or higher is recommended</li>\n<li>Node js</li>\n</ul>\n<h2>Installation</h2>\n<p>Go the project folder and install Python dependencies:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-r</span> requirements.txt</code></pre></div>\n<h2>Usage</h2>\n<p>The package stores data in a database and also notifies you by email.\nBefore using the package, you should provide the following environment variables:</p>\n<ul>\n<li><strong>USER_AGENT</strong>: A user agent string. For more information, refer to <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/User-Agent\">the official documentation</a>. Example value: <strong>Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/112.0.0.0 Safari/537.36</strong>.</li>\n<li><strong>CONNECTION_STRING</strong>: A database connection string. More information <a href=\"https://en.wikipedia.org/wiki/Connection_string\">here</a>. Example: <strong>sqlite:///flats.sqlite</strong>.</li>\n<li><strong>MAIL_HOST</strong>: Mail server hostname.</li>\n<li><strong>MAIL_PASS</strong>: Mail server password.</li>\n<li><strong>MAIL_USER</strong>: Mail sender.</li>\n<li><strong>MAIL_PORT</strong>: Mail server port.</li>\n<li><strong>MAIL_RECIPIENT</strong>: Mail recipient.</li>\n</ul>\n<p>For email server configuration, you can use gmail.com. <a href=\"https://kinsta.com/blog/gmail-smtp-server/\">This article</a> describes the steps to configure a gmail smtp server.</p>\n<p>After you set up the environment variables, go to the project folder and run the following command:</p>\n<div class=\"gatsby-highlight\" data-language=\"sh\"><pre class=\"language-sh\"><code class=\"language-sh\">scrapy crawl cian <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-a</span> <span class=\"token assign-left variable\">location</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>location string<span class=\"token operator\">></span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-a</span> <span class=\"token assign-left variable\">minprice</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>min price <span class=\"token keyword\">in</span> rubles<span class=\"token operator\">></span> <span class=\"token punctuation\">\\</span>\n<span class=\"token parameter variable\">-a</span> <span class=\"token assign-left variable\">maxprice</span><span class=\"token operator\">=</span><span class=\"token operator\">&lt;</span>max price <span class=\"token keyword\">in</span> rubles<span class=\"token operator\">></span></code></pre></div>\n<h2>Spider Reference</h2>\n<p>The spider has the following arguments (all arguments are passed as <strong>-a name=val</strong>):</p>\n<ul>\n<li><strong>location</strong>: (Required) A real address that identifies a location.</li>\n<li><strong>minprice</strong>: (Required) A min price for real estate objects</li>\n<li><strong>maxprice</strong>: (Required) A max pice for real estate objects</li>\n<li><strong>zoom</strong>: (Optional. Defaults to <strong>0.001</strong>) A variable used to create a location polygon (Check <a href=\"estate/spiders/cian.py\">estate/spiders/cian.py</a>). The bigger the value of <strong>zoom</strong>, the bigger the location polygon.</li>\n<li><strong>step</strong>: (Optional. Defaults to <strong>0.001</strong>) A variable used to split the location polygon into multiple polygons. The more polygons generated, the more results you get.</li>\n<li><strong>room1</strong>: (Optional. Defaults to <strong>1</strong>) If set to <strong>1</strong>, include one-room apartments, otherwise <strong>0</strong>.</li>\n<li><strong>room2</strong>: (Optional. Defaults to <strong>0</strong>) If set to <strong>1</strong>, include two-room apartments, otherwise <strong>0</strong>.</li>\n<li><strong>room3</strong>: (Optional. Defaults to <strong>0</strong>) If set to <strong>1</strong>, include three-room apartments, otherwise <strong>0</strong>.</li>\n<li><strong>room4</strong>: (Optional. Defaults to <strong>0</strong>) If set to <strong>1</strong>, include four-room apartments, otherwise <strong>0</strong>.</li>\n</ul>","frontmatter":{"title":"Scraping Real Estate Website"},"fields":{"updated":"2023-05-08T20:02:51.757Z","path":"/posts/scrapy-estate-cian/"}},"locales":{"edges":[{"node":{"ns":"index","data":"{\"Home\":\"Home\",\"Intro\":\"Intro\",\"Intro Short\":\"Lorem ipsum dolor sit amet. Non repudiandae quae est perspiciatis nulla non consequatur sapiente aut beatae magni. Ut porro molestias et omnis quia qui maxime natus! Ad accusamus nulla sit totam dicta ut rerum veritatis 33 mollitia animi et reprehenderit blanditiis 33 iusto internos et nihil debitis.\",\"Projects\":\"My Projects\",\"About\":\"About me\",\"Contact\":\"Contact me\",\"Show All\":\"Show All\",\"updated at\":\"updated at\",\"Written by\":\"Written by\"}","language":"en"}}]}},"pageContext":{"id":"1ff5ff52-6a52-5f92-9e5f-687b6b83cee2","languages":["ru","en"],"previous":{"id":"d2a01696-6cbc-504a-a7d0-3bb48533f738","fields":{"path":"/posts/multilingual-parallax-blog-website/","language":"en","sourceInstanceName":"posts"},"frontmatter":{"title":"Mutlilingual Blog Website with a Beautiful Parallax Landing"}},"next":{"id":"b4b21bb7-6990-5a19-8c94-00ad9d1e3b7b","fields":{"path":"/posts/testing/","language":"en","sourceInstanceName":"posts"},"frontmatter":{"title":"Testing"}},"language":"en","i18n":{"language":"en","languages":["en","ru"],"defaultLanguage":"en","generateDefaultLanguagePage":true,"routed":true,"originalPath":"/posts/scrapy-estate-cian/","path":"/en/posts/scrapy-estate-cian/"}}},"staticQueryHashes":["1271961041","2421966660","2744905544"],"slicesMap":{}}